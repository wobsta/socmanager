$def with (form)
$var script:
    <link rel="stylesheet" type="text/css" href="../../../../static/leaflet/leaflet.css">
<h1>Mitgliederdaten aktualiseren</h1>
<p>Damit wir nicht die Übersicht verlieren, darfst Du Deinen Namen nicht selbst ändern. Melde Namensänderungen unter <img src="../static/email.png" width=260 height=13 style="position:relative;top:2px;left:1px;">.</p>
<p>Die <a href="privacy.html">Hinweise zum Datenschutz im Mitgliederbereich des Schwäbischen Oratorienchors</a> erläutern, was mit Deinen persönlichen Daten geschieht. Wir haben neu (seit Herbst 2025) auch das Geburtsdatum zum Pflichtfeld gemacht, weil wir es zur Meldung beim Chorverband Bayerisch-Schwaben zwingend benötigen. Du kannst aber einstellen, dass wir es nur dort und nicht anderweitig verwenden.</p>
<form action="data.html" method="POST">
$:form.render()
</form>
<form action="#" onsubmit="searchAddress(); return false;">
<p><input type="submit" name="geocode" value="Adresse neu suchen"></p>
</form>
<p id="mapid" style="width: 700px; height: 500px"></p>
<p>zurück zu <a href="index.html">Deiner SOC Mitgliederseite</a>, ohne Änderungen vorzunehmen</p>
<script src="../../../../static/leaflet/leaflet.js"></script>
<script src="../../../../static/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
var lateral = parseFloat(document.getElementById("lateral").value);
var longitudinal = parseFloat(document.getElementById("longitudinal").value);
if (isNaN(lateral) || isNaN(longitudinal)) {
  var lateral = 48.3668041;
  var longitudinal = 10.8986971;
  var mymap = L.map('mapid', {center: [lateral, longitudinal], zoom: 10});
} else {
  var mymap = L.map('mapid', {center: [lateral, longitudinal], zoom: 16});
}
L.tileLayer('https://osmtiles.schwaebischer-oratorienchor.de/{z}/{x}/{y}.png', {attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(mymap);
var marker = L.marker([lateral, longitudinal]).addTo(mymap);
function searchAddress() {
  var searchUrl = 'https://nominatim.openstreetmap.org/search?format=json&limit=1&q=' + document.getElementById("street").value + ", " + document.getElementById("zip").value + " " + document.getElementById("city").value;
  $$.getJSON(searchUrl, function(data) {
    marker.setLatLng([data[0].lat, data[0].lon]);
    mymap.setView([data[0].lat, data[0].lon], 16);
    document.getElementById("lateral").value = data[0].lat;
    document.getElementById("longitudinal").value = data[0].lon;
  })
}
</script>
